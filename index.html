<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="12-hour weather forecast displayed on an intuitive clock interface">
  <meta name="theme-color" content="#4a90e2">
  <title>WeatherClock - Hourly Forecast at a Glance</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="/WeatherClock/manifest.json">

  <!-- iOS Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="WeatherClock">
  <link rel="apple-touch-icon" href="/WeatherClock/icons/icon-192.png">

  <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>WeatherClock</h1>
      <p class="subtitle">12-Hour Weather Forecast</p>
    </header>

    <div id="input-container">
      <div id="location-info">
        <div id="currentLocation">
          <svg class="location-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          <span id="currentCity">Fayetteville</span>, <span id="currentZip">72704</span>
          <span id="locationCounter" class="location-counter">1 / 1</span>
        </div>
        <div id="navigation-buttons">
          <button id="prevLocationBtn" class="nav-btn" aria-label="Previous location">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <button id="nextLocationBtn" class="nav-btn" aria-label="Next location">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>
      </div>
      <div class="input-group">
        <input id="zip" class="input-field" type="text" placeholder="Enter ZIP code" aria-label="ZIP code">
        <button id="updateButton" aria-label="Update location">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="23 4 23 10 17 10"></polyline>
            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
          </svg>
          Update
        </button>
        <button id="saveButton" aria-label="Save location">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
            <polyline points="17 21 17 13 7 13 7 21"></polyline>
            <polyline points="7 3 7 8 15 8"></polyline>
          </svg>
          Save
        </button>
      </div>
      <div id="savedLocations" class="saved-locations">
        <div class="saved-locations-header">Saved Locations</div>
        <div id="savedLocationsList" class="saved-locations-list"></div>
      </div>
    </div>

    <div class="clock-container">
      <svg id="clock" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
            <feOffset dx="0" dy="2" result="offsetblur"/>
            <feComponentTransfer>
              <feFuncA type="linear" slope="0.3"/>
            </feComponentTransfer>
            <feMerge>
              <feMergeNode/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <circle cx="150" cy="150" r="140" fill="white" stroke="#e0e0e0" stroke-width="2" filter="url(#shadow)" />
      </svg>
    </div>

    <footer>
      <p class="info-text">Each colored segment shows the temperature for the next hour. Hover over segments for details.</p>
    </footer>
  </div>

  <script src="clock.js"></script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/WeatherClock/sw.js')
          .then(registration => {
            console.log('ServiceWorker registration successful:', registration.scope);
          })
          .catch(err => {
            console.log('ServiceWorker registration failed:', err);
          });
      });
    }
  </script>
</body>
</html>
